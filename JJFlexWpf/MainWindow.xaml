<UserControl x:Class="JJFlexWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:controls="clr-namespace:JJFlexWpf.Controls"
        xmlns:local="clr-namespace:JJFlexWpf"
        mc:Ignorable="d"
        AutomationProperties.Name="JJFlexRadio Main Window"
        AutomationProperties.AutomationId="MainWindow"
        FocusManager.FocusedElement="{Binding ElementName=MainContent}"
        PreviewKeyDown="MainWindow_PreviewKeyDown">

    <!-- Sprint 8 Main Layout:
         DockPanel
           ├─ Menu (Top)           — Phase 8.5: Classic/Modern/Logging menu sets
           ├─ StatusBar (Bottom)   — Phase 8.2: StatusBox replacement (Power, Scan, etc.)
           └─ Grid (Fill)
                Row 0: RadioControls  — Phase 8.2: FreqOut, ModeControl, TXTuneControl, buttons
                Row 1: ContentArea    — Phase 8.3: Received/Sent text, rig fields
                Row 2: LoggingPanel   — Phase 8.8: LogEntryControl + RadioPane (Collapsed by default)
    -->
    <DockPanel>
        <!-- Menu bar is now a WinForms MenuStrip on ShellForm (Sprint 12).
             Native Win32 HMENU menus work correctly with JAWS/NVDA. -->

        <!-- ═══ STATUS BAR ═══ Replacement for RadioBoxes.MainBox StatusBox -->
        <StatusBar DockPanel.Dock="Bottom" x:Name="MainStatusBar"
                   AutomationProperties.Name="Radio Status">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="Ready — no radio connected" />
            </StatusBarItem>
            <Separator />
            <StatusBarItem AutomationProperties.Name="Power">
                <TextBlock x:Name="StatusPower" Text="" />
            </StatusBarItem>
            <Separator />
            <StatusBarItem AutomationProperties.Name="Memory">
                <TextBlock x:Name="StatusMemory" Text="" />
            </StatusBarItem>
            <Separator />
            <StatusBarItem AutomationProperties.Name="Scan">
                <TextBlock x:Name="StatusScan" Text="" />
            </StatusBarItem>
            <Separator />
            <StatusBarItem AutomationProperties.Name="Log File">
                <TextBlock x:Name="StatusLogFile" Text="" />
            </StatusBarItem>
        </StatusBar>

        <!-- ═══ MAIN CONTENT GRID ═══ -->
        <Grid x:Name="MainContent">
            <Grid.RowDefinitions>
                <!-- Row 0: Radio controls (frequency, mode, tuner, buttons) — Phase 8.2 -->
                <RowDefinition Height="Auto" />
                <!-- Row 1: Panadapter braille display — Sprint 12 Phase 12.9 -->
                <RowDefinition Height="Auto" />
                <!-- Row 2: Text content (received, sent, rig fields) — Phase 8.3 -->
                <RowDefinition Height="*" />
                <!-- Row 3: Logging mode overlay (collapsed by default) — Phase 8.8 -->
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Radio Controls Panel — Phase 8.2 -->
            <StackPanel Grid.Row="0" x:Name="RadioControlsPanel" Orientation="Horizontal"
                        Margin="4" AutomationProperties.Name="Radio Controls">

                <!-- Frequency Display (replacement for RadioBoxes.MainBox FreqOut) -->
                <controls:FrequencyDisplay x:Name="FreqOut" x:FieldModifier="public" Margin="4,2"
                    TabIndex="0"
                    AutomationProperties.Name="Frequency and VFO Display" />

                <!-- Mode selector — not in tab chain (use menu or hotkey) -->
                <controls:RadioComboBox x:Name="ModeControl" Margin="4,2"
                    IsTabStop="False"
                    AutomationProperties.Name="Operating Mode" />

                <!-- TX/Tune selector — not in tab chain (use menu or hotkey) -->
                <controls:RadioComboBox x:Name="TXTuneControl" Margin="4,2"
                    IsTabStop="False"
                    AutomationProperties.Name="Transmit Tune" />

                <!-- Antenna Tune button — not in tab chain (use menu or hotkey) -->
                <Button x:Name="AntennaTuneButton" Content="Tune"
                        Margin="4,2" Padding="8,4" MinWidth="60"
                        IsTabStop="False"
                        AutomationProperties.Name="Antenna Tuner"
                        Click="AntennaTuneButton_Click"
                        MouseEnter="AntennaTuneButton_MouseEnter"
                        MouseLeave="AntennaTuneButton_MouseLeave"
                        IsEnabled="False" />

                <!-- Transmit button — not in tab chain (use menu or hotkey) -->
                <Button x:Name="TransmitButton" Content="Transmit"
                        Margin="4,2" Padding="8,4" MinWidth="70"
                        IsTabStop="False"
                        AutomationProperties.Name="Transmit"
                        Click="TransmitButton_Click"
                        IsEnabled="False" />

            </StackPanel>

            <!-- Panadapter Braille Display — Sprint 12 Phase 12.9 -->
            <Grid Grid.Row="1" x:Name="PanadapterPanel" Visibility="Collapsed"
                  Margin="4,2" AutomationProperties.Name="Panadapter Display">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" x:Name="PanLowFreq" Text=""
                           VerticalAlignment="Center" Margin="4,0"
                           FontFamily="Consolas" FontSize="11"
                           AutomationProperties.Name="Low frequency" />

                <TextBox Grid.Column="1" x:Name="PanDisplayBox"
                         IsReadOnly="True"
                         FontFamily="Consolas" FontSize="12"
                         BorderThickness="1"
                         VerticalContentAlignment="Center"
                         TabIndex="1"
                         AutomationProperties.Name="Waterfall display"
                         PreviewKeyDown="PanDisplayBox_PreviewKeyDown"
                         GotFocus="PanDisplayBox_GotFocus"
                         LostFocus="PanDisplayBox_LostFocus" />

                <TextBlock Grid.Column="2" x:Name="PanHighFreq" Text=""
                           VerticalAlignment="Center" Margin="4,0"
                           FontFamily="Consolas" FontSize="11"
                           AutomationProperties.Name="High frequency" />
            </Grid>

            <!-- Content Area — Phase 8.3: Received/Sent text, rig fields debug view -->
            <Grid Grid.Row="2" x:Name="ContentArea" Margin="4">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />  <!-- Received label -->
                    <RowDefinition Height="*" />     <!-- Received text -->
                    <RowDefinition Height="Auto" />  <!-- Send label -->
                    <RowDefinition Height="*" />     <!-- Send text -->
                </Grid.RowDefinitions>

                <!-- Received Text Label -->
                <TextBlock Grid.Row="0" x:Name="ReceiveLabel" Text="Received Text"
                           Margin="4,2" FontSize="11" Foreground="Gray" />

                <!-- Received Text Box — displays decoded CW/digital text from the radio -->
                <TextBox Grid.Row="1" x:Name="ReceivedTextBox" x:FieldModifier="public"
                         AcceptsReturn="True"
                         IsReadOnly="False"
                         TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Auto"
                         FontFamily="Consolas"
                         FontSize="12"
                         Margin="4,0"
                         TabIndex="2"
                         AutomationProperties.Name="Received text"
                         PreviewKeyDown="ReceivedTextBox_PreviewKeyDown" />

                <!-- Send Text Label -->
                <TextBlock Grid.Row="2" x:Name="SendLabel" Text="Sending Text"
                           Margin="4,2" FontSize="11" Foreground="Gray" />

                <!-- Send Text Box — user types CW/digital text to transmit -->
                <TextBox Grid.Row="3" x:Name="SentTextBox" x:FieldModifier="public"
                         AcceptsReturn="True"
                         IsReadOnly="False"
                         TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Auto"
                         AllowDrop="True"
                         FontFamily="Consolas"
                         FontSize="12"
                         Margin="4,0"
                         TabIndex="3"
                         AutomationProperties.Name="Sent Text"
                         PreviewKeyDown="SentTextBox_PreviewKeyDown"
                         PreviewTextInput="SentTextBox_PreviewTextInput" />

                <!-- Rig Fields debug display (hidden, low priority) -->
                <TextBox x:Name="RigFieldsBox"
                         Grid.Row="1" Grid.RowSpan="3"
                         IsReadOnly="True"
                         TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Auto"
                         FontFamily="Consolas"
                         FontSize="10"
                         Visibility="Collapsed"
                         AutomationProperties.Name="Rig Fields Debug" />
            </Grid>

            <!-- Logging Mode Panel — Phase 8.8: Native WPF, no ElementHost!
                 Left column: RadioPaneControl (frequency, mode, tuning)
                 GridSplitter: drag to resize
                 Right column: LogEntryControl (call sign, RST, QSO grid)
                 This is where the ElementHost interop bugs die:
                 - No more "unknown" on entry (no container announcement)
                 - No focus trapping on hide (pure WPF Visibility toggle)
                 - Keyboard routing works natively (PreviewKeyDown on Window)
            -->
            <Grid Grid.Row="3" x:Name="LoggingPanel" Visibility="Collapsed"
                  AutomationProperties.Name="Logging Mode">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="250" MinWidth="150" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" MinWidth="300" />
                </Grid.ColumnDefinitions>

                <!-- RadioPane — frequency, mode, band, tuning controls -->
                <controls:RadioPaneControl Grid.Column="0" x:Name="LoggingRadioPane"
                    AutomationProperties.Name="Radio Pane" />

                <!-- GridSplitter — replaces WinForms SplitContainer -->
                <GridSplitter Grid.Column="1" Width="5"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Stretch"
                              ResizeBehavior="PreviousAndNext"
                              AutomationProperties.Name="Logging Panel Splitter" />

                <!-- LogEntryControl — call sign, RST, QSO grid (already pure WPF!) -->
                <local:LogEntryControl Grid.Column="2" x:Name="LoggingLogEntry"
                    AutomationProperties.Name="Log Entry" />
            </Grid>
        </Grid>
    </DockPanel>
</UserControl>
